<!doctype html>
<html lang="id">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Media Pembelajaran Bangun Ruang 3D - SMP</title>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100%;
      overflow-x: hidden;
    }

    * {
      box-sizing: border-box;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      min-height: 100%;
    }

    .page {
      display: none;
      animation: fadeIn 0.5s ease-in;
    }

    .page.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .header {
      text-align: center;
      color: white;
      margin-bottom: 30px;
      padding: 20px;
    }

    .header h1 {
      font-size: 2.5em;
      margin: 10px 0;
      text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
    }

    .header p {
      font-size: 1.2em;
      margin: 10px 0;
      opacity: 0.95;
    }

    .card {
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.3);
      margin-bottom: 20px;
    }

    .form-group {
      margin-bottom: 25px;
    }

    .form-group label {
      display: block;
      margin-bottom: 10px;
      font-weight: bold;
      color: #333;
      font-size: 1.1em;
    }

    .form-group input,
    .form-group select {
      width: 100%;
      padding: 15px;
      border: 2px solid #ddd;
      border-radius: 10px;
      font-size: 1.1em;
      transition: border-color 0.3s;
    }

    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: #667eea;
    }

    .btn {
      background: #667eea;
      color: white;
      border: none;
      padding: 15px 40px;
      border-radius: 25px;
      font-size: 1.2em;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
      display: inline-block;
      text-align: center;
      text-decoration: none;
    }

    .btn:hover {
      background: #5568d3;
      transform: translateY(-2px);
      box-shadow: 0 7px 20px rgba(102, 126, 234, 0.6);
    }

    .btn:disabled {
      background: #cbd5e0;
      cursor: not-allowed;
      transform: none;
    }

    .btn-success {
      background: #48bb78;
    }

    .btn-success:hover {
      background: #38a169;
    }

    .btn-warning {
      background: #ed8936;
    }

    .btn-warning:hover {
      background: #dd6b20;
    }

    .btn-danger {
      background: #f56565;
    }

    .btn-danger:hover {
      background: #e53e3e;
    }

    .menu-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }

    .menu-item {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 40px 20px;
      border-radius: 15px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }

    .menu-item:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 30px rgba(0,0,0,0.3);
    }

    .menu-item-icon {
      font-size: 4em;
      margin-bottom: 15px;
    }

    .menu-item-text {
      font-size: 1.3em;
      font-weight: bold;
    }

    .kelas-selector {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin: 30px 0;
    }

    .kelas-card {
      background: white;
      border: 4px solid #667eea;
      border-radius: 15px;
      padding: 30px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
    }

    .kelas-card:hover {
      background: #667eea;
      color: white;
      transform: scale(1.05);
    }

    .kelas-number {
      font-size: 4em;
      font-weight: bold;
      margin-bottom: 10px;
    }

    .materi-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 25px;
      margin: 30px 0;
    }

    .materi-card {
      background: white;
      border: 3px solid #667eea;
      border-radius: 15px;
      padding: 25px;
      text-align: center;
      transition: all 0.3s;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .materi-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
    }

    .materi-icon {
      font-size: 5em;
      margin-bottom: 15px;
    }

    .materi-title {
      font-size: 1.8em;
      font-weight: bold;
      color: #667eea;
      margin-bottom: 15px;
    }

    .materi-desc {
      color: #666;
      margin-bottom: 20px;
      line-height: 1.8;
      font-size: 1.05em;
    }

    .info-box {
      background: #f7fafc;
      padding: 25px;
      border-radius: 10px;
      margin: 25px 0;
      border-left: 5px solid #667eea;
      line-height: 1.8;
    }

    .info-box h3 {
      color: #667eea;
      margin-bottom: 15px;
    }

    .canvas-container {
      background: #1a1a1a;
      border-radius: 15px;
      padding: 30px;
      margin: 25px 0;
      position: relative;
      min-height: 500px;
    }

    #canvas3d {
      width: 100%;
      height: 500px;
      display: block;
      border-radius: 10px;
    }

    .control-panel {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(255,255,255,0.95);
      padding: 20px;
      border-radius: 10px;
      max-width: 280px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }

    .control-panel h4 {
      color: #667eea;
      margin: 0 0 15px 0;
      font-size: 1.1em;
    }

    .control-panel p {
      margin: 8px 0;
      font-size: 0.95em;
      color: #333;
    }

    .btn-group {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 25px;
    }

    .quiz-container {
      margin: 30px 0;
    }

    .quiz-question {
      background: #f7fafc;
      padding: 30px;
      border-radius: 15px;
      margin-bottom: 25px;
      border-left: 5px solid #667eea;
    }

    .quiz-question h3 {
      color: #333;
      margin-bottom: 20px;
      font-size: 1.4em;
    }

    .quiz-question-text {
      font-size: 1.2em;
      color: #333;
      margin: 20px 0;
      line-height: 1.8;
      font-weight: 500;
    }

    .quiz-options {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-top: 25px;
    }

    .quiz-option {
      background: white;
      border: 3px solid #ddd;
      padding: 18px;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 1.1em;
    }

    .quiz-option:hover {
      border-color: #667eea;
      background: #f0f4ff;
      transform: translateX(5px);
    }

    .quiz-option.correct {
      border-color: #48bb78;
      background: #f0fff4;
      font-weight: bold;
    }

    .quiz-option.wrong {
      border-color: #f56565;
      background: #fff5f5;
    }

    .quiz-option.disabled {
      pointer-events: none;
      opacity: 0.7;
    }

    .progress-bar {
      background: #e2e8f0;
      border-radius: 10px;
      height: 30px;
      margin: 25px 0;
      overflow: hidden;
    }

    .progress-fill {
      background: linear-gradient(90deg, #48bb78 0%, #38a169 100%);
      height: 100%;
      transition: width 0.5s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 1.05em;
    }

    .score-display {
      background: linear-gradient(135deg, #ffd93d 0%, #ffb347 100%);
      padding: 30px;
      border-radius: 15px;
      text-align: center;
      margin: 25px 0;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }

    .score-number {
      font-size: 4em;
      font-weight: bold;
      color: #333;
    }

    .score-label {
      font-size: 1.3em;
      color: #666;
      margin-top: 10px;
    }

    .badge {
      display: inline-block;
      padding: 15px 30px;
      border-radius: 25px;
      font-weight: bold;
      margin: 15px 0;
      font-size: 1.4em;
    }

    .badge-pemula {
      background: #cbd5e0;
      color: #2d3748;
    }

    .badge-penjelajah {
      background: #90cdf4;
      color: #2c5282;
    }

    .badge-ahli {
      background: #ffd93d;
      color: #744210;
    }

    .certificate-preview {
      background: white;
      border: 5px solid #667eea;
      border-radius: 15px;
      padding: 50px;
      margin: 30px 0;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      text-align: center;
    }

    .certificate-preview h2 {
      color: #667eea;
      font-size: 2.2em;
      margin-bottom: 10px;
    }

    .certificate-preview h3 {
      color: #764ba2;
      font-size: 1.5em;
      margin-bottom: 30px;
    }

    .certificate-preview .student-name {
      font-size: 2.5em;
      font-weight: bold;
      color: #667eea;
      margin: 30px 0;
    }

    .certificate-preview .certificate-text {
      font-size: 1.2em;
      line-height: 2;
      color: #333;
      margin: 25px 0;
    }

    .certificate-preview .signature {
      margin-top: 50px;
      font-style: italic;
      color: #666;
    }

    .video-container {
      background: #000;
      border-radius: 15px;
      padding: 20px;
      margin: 25px 0;
    }

    .video-wrapper {
      position: relative;
      padding-bottom: 56.25%;
      height: 0;
      overflow: hidden;
      border-radius: 10px;
    }

    .video-wrapper iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background: white;
      padding: 20px 30px;
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      display: none;
      animation: slideIn 0.3s ease-out;
      z-index: 1000;
      max-width: 350px;
    }

    .toast.show {
      display: block;
    }

    .toast.success {
      border-left: 5px solid #48bb78;
    }

    .toast.error {
      border-left: 5px solid #f56565;
    }

    @keyframes slideIn {
      from { transform: translateX(400px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    .loading {
      text-align: center;
      padding: 50px;
      color: #667eea;
      font-size: 1.3em;
    }

    .shape-selector {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }

    .shape-btn {
      background: white;
      border: 3px solid #667eea;
      padding: 25px;
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.3s;
      text-align: center;
    }

    .shape-btn:hover {
      background: #667eea;
      color: white;
      transform: scale(1.05);
    }

    .shape-btn .shape-icon {
      font-size: 4em;
      margin-bottom: 10px;
    }

    .shape-btn .shape-name {
      font-weight: bold;
      font-size: 1.2em;
    }

    @media (max-width: 768px) {
      .header h1 {
        font-size: 1.8em;
      }

      .menu-grid {
        grid-template-columns: 1fr;
      }

      .kelas-selector {
        grid-template-columns: 1fr;
      }

      .materi-grid {
        grid-template-columns: 1fr;
      }

      .btn-group {
        flex-direction: column;
      }

      .btn {
        width: 100%;
      }

      .control-panel {
        position: static;
        margin-top: 20px;
        max-width: 100%;
      }

      .certificate-preview {
        padding: 25px;
      }

      .certificate-preview h2 {
        font-size: 1.5em;
      }

      .certificate-preview .student-name {
        font-size: 1.8em;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="container">
   <div class="toast" id="toast"></div><!-- HALAMAN 1: LOGIN -->
   <div class="page active" id="page-login">
    <div class="header">
     <h1 id="app-title">üìê MEDIA PEMBELAJARAN BANGUN RUANG 3D üìê</h1>
     <p id="welcome-message">Selamat datang di Media Pembelajaran Interaktif untuk Siswa SMP</p>
    </div>
    <div class="card">
     <h2 style="text-align: center; color: #667eea; margin-bottom: 30px;">Silakan Login untuk Memulai</h2>
     <form id="login-form">
      <div class="form-group"><label for="nama">Nama Lengkap</label> <input type="text" id="nama" required placeholder="Masukkan nama lengkap Anda">
      </div>
      <div class="form-group"><label for="kelas">Pilih Kelas</label> <select id="kelas" required> <option value="">-- Pilih Kelas --</option> <option value="7">Kelas 7</option> <option value="8">Kelas 8</option> <option value="9">Kelas 9</option> </select>
      </div>
      <div style="text-align: center; margin-top: 40px;"><button type="submit" class="btn" id="login-button">MASUK üöÄ</button>
      </div>
     </form>
    </div>
    <div class="info-box" style="background: rgba(255,255,255,0.95); border-left: 5px solid #ffd93d;">
     <h3 style="color: #667eea;">üí° Tentang Media Pembelajaran Ini</h3>
     <p style="color: #333; font-size: 1.05em;">Media pembelajaran ini dirancang khusus untuk membantu siswa SMP memahami bangun ruang secara interaktif. Anda dapat mempelajari materi, menonton video, mengerjakan quiz, dan mendapatkan sertifikat kelulusan!</p>
    </div>
   </div><!-- HALAMAN 2: MENU UTAMA -->
   <div class="page" id="page-menu">
    <div class="header">
     <h1>üéØ MENU UTAMA</h1>
     <p>Selamat datang, <strong><span id="student-name"></span></strong> - Kelas <span id="student-kelas"></span></p>
    </div>
    <div class="card">
     <h2 style="text-align: center; color: #667eea; margin-bottom: 30px;">Pilih Menu Pembelajaran</h2>
     <div class="menu-grid">
      <div class="menu-item" onclick="showPage('page-pilih-kelas')">
       <div class="menu-item-icon">
        üìö
       </div>
       <div class="menu-item-text">
        Materi
       </div>
       <p style="font-size: 0.9em; margin-top: 10px;">Pelajari bangun ruang</p>
      </div>
      <div class="menu-item" onclick="showPage('page-video')">
       <div class="menu-item-icon">
        üé¨
       </div>
       <div class="menu-item-text">
        Video Pembelajaran
       </div>
       <p style="font-size: 0.9em; margin-top: 10px;">Tonton video edukatif</p>
      </div>
      <div class="menu-item" onclick="showPage('page-pilih-quiz')">
       <div class="menu-item-icon">
        üìù
       </div>
       <div class="menu-item-text">
        Quiz
       </div>
       <p style="font-size: 0.9em; margin-top: 10px;">Uji pemahamanmu</p>
      </div>
      <div class="menu-item" onclick="showCertificatePage()">
       <div class="menu-item-icon">
        üèÜ
       </div>
       <div class="menu-item-text">
        Sertifikat
       </div>
       <p style="font-size: 0.9em; margin-top: 10px;">Lihat sertifikatmu</p>
      </div>
      <div class="menu-item" onclick="logout()">
       <div class="menu-item-icon">
        üö™
       </div>
       <div class="menu-item-text">
        Keluar
       </div>
       <p style="font-size: 0.9em; margin-top: 10px;">Logout dari aplikasi</p>
      </div>
     </div>
    </div>
   </div><!-- HALAMAN 3: PILIH KELAS UNTUK MATERI -->
   <div class="page" id="page-pilih-kelas">
    <div class="header">
     <h1>üìö PILIH TINGKAT KELAS</h1>
     <p>Materi disesuaikan dengan kurikulum SMP</p>
    </div>
    <div class="card">
     <h2 style="text-align: center; color: #667eea; margin-bottom: 30px;">Pilih Kelas untuk Melihat Materi</h2>
     <div class="kelas-selector">
      <div class="kelas-card" onclick="showMateriKelas(7)">
       <div class="kelas-number">
        7Ô∏è‚É£
       </div>
       <h3>Kelas 7</h3>
       <p style="color: #666; margin-top: 10px;">Pengenalan Bangun Ruang</p>
      </div>
      <div class="kelas-card" onclick="showMateriKelas(8)">
       <div class="kelas-number">
        8Ô∏è‚É£
       </div>
       <h3>Kelas 8</h3>
       <p style="color: #666; margin-top: 10px;">Kubus, Balok, Prisma, Limas</p>
      </div>
      <div class="kelas-card" onclick="showMateriKelas(9)">
       <div class="kelas-number">
        9Ô∏è‚É£
       </div>
       <h3>Kelas 9</h3>
       <p style="color: #666; margin-top: 10px;">Tabung, Kerucut, Bola</p>
      </div>
     </div>
     <div class="btn-group"><button class="btn" onclick="showPage('page-menu')">Kembali ke Menu</button>
     </div>
    </div>
   </div><!-- HALAMAN MATERI KELAS 7 -->
   <div class="page" id="page-materi-7">
    <div class="header">
     <h1>üìö MATERI KELAS 7</h1>
     <p>Pengenalan Bangun Ruang</p>
    </div>
    <div class="card">
     <div class="info-box">
      <h3>Apa itu Bangun Ruang?</h3>
      <p style="font-size: 1.1em;"><strong>Bangun Ruang</strong> adalah bangun tiga dimensi yang memiliki ruang atau volume. Berbeda dengan bangun datar yang hanya memiliki panjang dan lebar, bangun ruang memiliki panjang, lebar, dan tinggi.</p>
     </div>
     <div class="info-box" style="border-left-color: #48bb78;">
      <h3>Bagian-bagian Bangun Ruang:</h3>
      <ul style="font-size: 1.1em; line-height: 2;">
       <li><strong>Sisi:</strong> Bidang datar yang membatasi bangun ruang</li>
       <li><strong>Rusuk:</strong> Garis pertemuan antara dua sisi</li>
       <li><strong>Titik Sudut:</strong> Titik pertemuan antara tiga rusuk atau lebih</li>
      </ul>
     </div>
     <h3 style="text-align: center; color: #667eea; margin: 40px 0 30px 0;">Bangun Ruang yang Dipelajari</h3>
     <div class="materi-grid">
      <div class="materi-card">
       <div class="materi-icon">
        üü¶
       </div>
       <div class="materi-title">
        Kubus
       </div>
       <div class="materi-desc"><strong>Sisi:</strong> 6 (semua persegi)<br><strong>Rusuk:</strong> 12 (semua sama panjang)<br><strong>Titik Sudut:</strong> 8<br><br><strong>Contoh Benda:</strong><br>
         Dadu, rubik, kotak kardus
       </div><button class="btn btn-success" onclick="showModel3D('Kubus', 7)">Amati Model 3D</button>
      </div>
      <div class="materi-card">
       <div class="materi-icon">
        üì¶
       </div>
       <div class="materi-title">
        Balok
       </div>
       <div class="materi-desc"><strong>Sisi:</strong> 6 (persegi panjang)<br><strong>Rusuk:</strong> 12 (3 ukuran berbeda)<br><strong>Titik Sudut:</strong> 8<br><br><strong>Contoh Benda:</strong><br>
         Kotak sepatu, lemari es, buku
       </div><button class="btn btn-success" onclick="showModel3D('Balok', 7)">Amati Model 3D</button>
      </div>
      <div class="materi-card">
       <div class="materi-icon">
        üî∑
       </div>
       <div class="materi-title">
        Prisma Segitiga
       </div>
       <div class="materi-desc"><strong>Sisi:</strong> 5 (2 segitiga, 3 persegi panjang)<br><strong>Rusuk:</strong> 9<br><strong>Titik Sudut:</strong> 6<br><br><strong>Contoh Benda:</strong><br>
         Atap rumah, tenda kemping
       </div><button class="btn btn-success" onclick="showModel3D('Prisma', 7)">Amati Model 3D</button>
      </div>
     </div>
     <div class="btn-group"><button class="btn" onclick="showPage('page-pilih-kelas')">Kembali</button> <button class="btn btn-warning" onclick="showMateriKelas(8)">Lihat Materi Kelas 8</button>
     </div>
    </div>
   </div><!-- HALAMAN MATERI KELAS 8 -->
   <div class="page" id="page-materi-8">
    <div class="header">
     <h1>üìö MATERI KELAS 8</h1>
     <p>Kubus, Balok, Prisma, dan Limas</p>
    </div>
    <div class="card">
     <h2 style="text-align: center; color: #667eea; margin-bottom: 30px;">Sifat, Ciri-ciri, dan Rumus Bangun Ruang</h2>
     <div class="materi-grid">
      <div class="materi-card">
       <div class="materi-icon">
        üü¶
       </div>
       <div class="materi-title">
        Kubus
       </div>
       <div class="materi-desc"><strong>Ciri-ciri:</strong><br>
         ‚Ä¢ 6 sisi berbentuk persegi<br>
         ‚Ä¢ 12 rusuk sama panjang<br>
         ‚Ä¢ 8 titik sudut<br><br><strong>Rumus:</strong><br>
         Luas Permukaan = 6 √ó s¬≤<br>
         Volume = s¬≥<br><br><strong>Contoh:</strong> Dadu, rubik, kotak kado
       </div><button class="btn btn-success" onclick="showModel3D('Kubus', 8)">Amati Model 3D</button>
      </div>
      <div class="materi-card">
       <div class="materi-icon">
        üì¶
       </div>
       <div class="materi-title">
        Balok
       </div>
       <div class="materi-desc"><strong>Ciri-ciri:</strong><br>
         ‚Ä¢ 6 sisi persegi panjang<br>
         ‚Ä¢ 12 rusuk (3 ukuran berbeda)<br>
         ‚Ä¢ 8 titik sudut<br><br><strong>Rumus:</strong><br>
         Luas Permukaan = 2(pl + pt + lt)<br>
         Volume = p √ó l √ó t<br><br><strong>Contoh:</strong> Kotak sepatu, lemari, akuarium
       </div><button class="btn btn-success" onclick="showModel3D('Balok', 8)">Amati Model 3D</button>
      </div>
      <div class="materi-card">
       <div class="materi-icon">
        üî∑
       </div>
       <div class="materi-title">
        Prisma
       </div>
       <div class="materi-desc"><strong>Ciri-ciri:</strong><br>
         ‚Ä¢ Alas dan atap kongruen<br>
         ‚Ä¢ Sisi tegak persegi panjang<br><br><strong>Rumus:</strong><br>
         Luas Permukaan = (2 √ó luas alas) + (keliling alas √ó tinggi)<br>
         Volume = luas alas √ó tinggi<br><br><strong>Contoh:</strong> Atap rumah, tenda, toblerone
       </div><button class="btn btn-success" onclick="showModel3D('Prisma', 8)">Amati Model 3D</button>
      </div>
      <div class="materi-card">
       <div class="materi-icon">
        üî∫
       </div>
       <div class="materi-title">
        Limas
       </div>
       <div class="materi-desc"><strong>Ciri-ciri:</strong><br>
         ‚Ä¢ Memiliki satu alas<br>
         ‚Ä¢ Sisi tegak berbentuk segitiga<br>
         ‚Ä¢ Bertemu di satu titik puncak<br><br><strong>Rumus:</strong><br>
         Luas Permukaan = luas alas + jumlah luas sisi tegak<br>
         Volume = 1/3 √ó luas alas √ó tinggi<br><br><strong>Contoh:</strong> Piramida, atap joglo
       </div><button class="btn btn-success" onclick="showModel3D('Limas', 8)">Amati Model 3D</button>
      </div>
     </div>
     <div class="btn-group"><button class="btn" onclick="showPage('page-pilih-kelas')">Kembali</button> <button class="btn btn-warning" onclick="showMateriKelas(9)">Lihat Materi Kelas 9</button>
     </div>
    </div>
   </div><!-- HALAMAN MATERI KELAS 9 -->
   <div class="page" id="page-materi-9">
    <div class="header">
     <h1>üìö MATERI KELAS 9</h1>
     <p>Tabung, Kerucut, dan Bola</p>
    </div>
    <div class="card">
     <div class="info-box">
      <h3>Bangun Ruang Sisi Lengkung</h3>
      <p style="font-size: 1.1em;"><strong>Bangun Ruang Sisi Lengkung</strong> adalah bangun ruang yang memiliki permukaan lengkung. Berbeda dengan kubus atau balok yang memiliki sisi datar, bangun ruang ini memiliki sisi yang melengkung.</p>
     </div>
     <div class="materi-grid">
      <div class="materi-card">
       <div class="materi-icon">
        ü•´
       </div>
       <div class="materi-title">
        Tabung
       </div>
       <div class="materi-desc"><strong>Ciri-ciri:</strong><br>
         ‚Ä¢ Alas dan tutup lingkaran<br>
         ‚Ä¢ 1 sisi lengkung (selimut)<br>
         ‚Ä¢ Tidak ada titik sudut<br><br><strong>Rumus:</strong><br>
         Luas Permukaan = 2œÄr¬≤ + 2œÄrt<br>
         Volume = œÄr¬≤t<br><br><strong>Contoh:</strong> Kaleng susu, drum, pipa, gelas
       </div><button class="btn btn-success" onclick="showModel3D('Tabung', 9)">Amati Model 3D</button>
      </div>
      <div class="materi-card">
       <div class="materi-icon">
        üç¶
       </div>
       <div class="materi-title">
        Kerucut
       </div>
       <div class="materi-desc"><strong>Ciri-ciri:</strong><br>
         ‚Ä¢ Alas berbentuk lingkaran<br>
         ‚Ä¢ 1 sisi lengkung (selimut)<br>
         ‚Ä¢ 1 titik puncak<br><br><strong>Rumus:</strong><br>
         Luas Permukaan = œÄr¬≤ + œÄrs<br>
         Volume = 1/3 √ó œÄr¬≤t<br>
         (s = garis pelukis)<br><br><strong>Contoh:</strong> Es krim cone, topi ulang tahun
       </div><button class="btn btn-success" onclick="showModel3D('Kerucut', 9)">Amati Model 3D</button>
      </div>
      <div class="materi-card">
       <div class="materi-icon">
        ‚öΩ
       </div>
       <div class="materi-title">
        Bola
       </div>
       <div class="materi-desc"><strong>Ciri-ciri:</strong><br>
         ‚Ä¢ Seluruh permukaan melengkung<br>
         ‚Ä¢ Semua titik berjarak sama dari pusat<br>
         ‚Ä¢ Tidak ada rusuk dan titik sudut<br><br><strong>Rumus:</strong><br>
         Luas Permukaan = 4œÄr¬≤<br>
         Volume = 4/3 √ó œÄr¬≥<br><br><strong>Contoh:</strong> Bola sepak, bola basket, kelereng
       </div><button class="btn btn-success" onclick="showModel3D('Bola', 9)">Amati Model 3D</button>
      </div>
     </div>
     <div class="info-box" style="background: #fff5e6; border-left-color: #ffb347;">
      <h3>üí° Perbandingan Volume</h3>
      <p style="font-size: 1.1em;">Jika tabung, kerucut, dan bola memiliki jari-jari dan tinggi yang sama, maka:<br><br><strong>Volume Tabung : Volume Kerucut : Volume Bola = 3 : 1 : 2</strong><br><br>
        Ini berarti volume tabung adalah yang terbesar, diikuti bola, dan kerucut yang terkecil.</p>
     </div>
     <div class="info-box" style="border-left-color: #ed8936;">
      <h3>üåç Penerapan dalam Kehidupan Sehari-hari</h3>
      <ul style="font-size: 1.05em; line-height: 2;">
       <li><strong>Tabung:</strong> Tangki air, silo penyimpanan, kaleng minuman</li>
       <li><strong>Kerucut:</strong> Traffic cone, corong, topi ulang tahun</li>
       <li><strong>Bola:</strong> Planet, bola olahraga, lampu hias</li>
      </ul>
     </div>
     <div class="btn-group"><button class="btn" onclick="showPage('page-pilih-kelas')">Kembali</button> <button class="btn btn-warning" onclick="showMateriKelas(7)">Lihat Materi Kelas 7</button>
     </div>
    </div>
   </div><!-- HALAMAN MODEL 3D -->
   <div class="page" id="page-model3d">
    <div class="header">
     <h1>üé® MODEL 3D INTERAKTIF</h1>
     <p id="model-subtitle">Amati dan pelajari bangun ruang</p>
    </div>
    <div class="card">
     <h2 style="color: #667eea; text-align: center; margin-bottom: 25px;" id="model-title">Kubus</h2>
     <div class="canvas-container">
      <canvas id="canvas3d"></canvas>
      <div class="control-panel">
       <h4>üéÆ Kontrol:</h4>
       <p>üñ±Ô∏è <strong>Klik &amp; Drag:</strong> Putar model</p>
       <p>üîç <strong>Scroll:</strong> Zoom in/out</p>
       <p>üëÜ <strong>Klik Sisi:</strong> Lihat info</p>
      </div>
     </div>
     <div class="btn-group"><button class="btn btn-success" onclick="toggleAutoRotate()"> <span id="rotate-btn-text">‚ñ∂Ô∏è Putar Otomatis</span> </button> <button class="btn btn-warning" onclick="resetCamera()">üîÑ Kembalikan ke Posisi Awal</button>
     </div>
     <div id="model-info" class="info-box"><!-- Info akan diisi oleh JavaScript -->
     </div>
     <div id="clicked-info" class="info-box" style="display: none; background: #fff5e6; border-left-color: #ffb347;"><!-- Info klik akan muncul di sini -->
     </div>
     <div class="btn-group"><button class="btn" onclick="backFromModel()">Kembali</button> <button class="btn btn-success" onclick="showNextMaterial()">Materi Berikutnya</button>
     </div>
    </div>
   </div><!-- HALAMAN VIDEO PEMBELAJARAN -->
   <div class="page" id="page-video">
    <div class="header">
     <h1>üé¨ VIDEO PEMBELAJARAN</h1>
     <p>Tonton video untuk memahami materi lebih dalam</p>
    </div>
    <div class="card">
     <h2 style="text-align: center; color: #667eea; margin-bottom: 30px;">Video Pembelajaran Bangun Ruang</h2>
     <div class="video-container">

  <!-- Playlist / Video Umum -->
  <div class="video-wrapper">
    <iframe
      src="www.youtube.com/embed/ZlHJtdcVab/"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
      allowfullscreen>
    </iframe>
  </div> 
  <div style="text-align:center; margin-top:10px;">
    <a href="https://youtu.be/ZlHJtdcVabo" target="_blank" class="btn btn-success">
      Tonton di YouTube ‚ñ∂Ô∏è
    </a>
  </div>

  <!-- Video Kelas 7 -->
  <h3 style="color: #ffffff; margin-bottom: 10px; text-align:center;">üéì Video Materi Kelas 7</h3>
  <div class="video-wrapper">
    <iframe
      src="https://www.youtube.com/embed/ZlHJtdcVabo"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
      allowfullscreen>
    </iframe>
  </div>
  <div style="text-align:center; margin-top:10px;">
    <a href="https://youtu.be/ZlHJtdcVabo" target="_blank" class="btn btn-success">
      Tonton di YouTube ‚ñ∂Ô∏è
    </a>
  </div>

  <!-- Video Kelas 8 -->
  <h3 style="color: #ffffff; margin-top: 30px; margin-bottom: 10px; text-align:center;">
    üéì Video Materi Kelas 8
  </h3>
  <div class="video-wrapper">
    <iframe
      src="https://www.youtube.com/embed/fInGY7r5Izg"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
      allowfullscreen>
    </iframe>
  </div>
  <div style="text-align:center; margin-top:10px;">
    <a href="https://youtu.be/fInGY7r5Izg" target="_blank" class="btn btn-success">Tonton di YouTube ‚ñ∂Ô∏è</a>
  </div>

  <!-- Video Kelas 9 -->
  <h3 style="color: #ffffff; margin-top: 30px; margin-bottom: 10px; text-align:center;">
    üéì Video Materi Kelas 9
  </h3>
  <div class="video-wrapper">
    <iframe
      src="https://www.youtube.com/embed/RZUnF70ejOU"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
      allowfullscreen>
    </iframe>
  </div>
  <div style="text-align:center; margin-top:10px;">
    <a href="https://youtu.be/RZUnF70ejOU" target="_blank" class="btn btn-success">
      Tonton di YouTube ‚ñ∂Ô∏è
    </a>
  </div>
</div>

      </div>
     </div>
     <div class="info-box" style="margin-top: 30px;">
      <h3>üì∫ Fitur Video:</h3>
      <ul style="font-size: 1.05em; line-height: 2;">
       <li>Penjelasan lengkap tentang bangun ruang</li>
       <li>Visualisasi 3D yang mudah dipahami</li>
       <li>Contoh soal dan pembahasan</li>
       <li>Dapat di-pause, play, dan fullscreen</li>
      </ul>
     </div>
     <div class="btn-group"><button class="btn" onclick="showPage('page-menu')">Kembali ke Menu</button> <a href="https://www.youtube.com/results?search_query=bangun+ruang+smp" target="_blank" rel="noopener noreferrer" class="btn btn-success">Cari Video Lainnya üîç</a>
     </div>
    </div>
   </div><!-- HALAMAN PILIH BANGUN RUANG UNTUK QUIZ -->
   <div class="page" id="page-pilih-quiz">
    <div class="header">
     <h1>üìù PILIH BANGUN RUANG</h1>
     <p>Pilih bangun ruang untuk memulai quiz</p>
    </div>
    <div class="card">
     <h2 style="text-align: center; color: #667eea; margin-bottom: 20px;">Quiz Interaktif</h2>
     <p style="text-align: center; color: #666; font-size: 1.1em; margin-bottom: 30px;">Setiap quiz berisi <strong>10 soal acak</strong> dari bank soal 200 soal</p>
     <div class="shape-selector">
      <div class="shape-btn" onclick="startQuiz('Kubus')">
       <div class="shape-icon">
        üü¶
       </div>
       <div class="shape-name">
        Kubus
       </div>
      </div>
      <div class="shape-btn" onclick="startQuiz('Balok')">
       <div class="shape-icon">
        üì¶
       </div>
       <div class="shape-name">
        Balok
       </div>
      </div>
      <div class="shape-btn" onclick="startQuiz('Prisma')">
       <div class="shape-icon">
        üî∑
       </div>
       <div class="shape-name">
        Prisma
       </div>
      </div>
      <div class="shape-btn" onclick="startQuiz('Limas')">
       <div class="shape-icon">
        üî∫
       </div>
       <div class="shape-name">
        Limas
       </div>
      </div>
      <div class="shape-btn" onclick="startQuiz('Tabung')">
       <div class="shape-icon">
        ü•´
       </div>
       <div class="shape-name">
        Tabung
       </div>
      </div>
      <div class="shape-btn" onclick="startQuiz('Kerucut')">
       <div class="shape-icon">
        üç¶
       </div>
       <div class="shape-name">
        Kerucut
       </div>
      </div>
      <div class="shape-btn" onclick="startQuiz('Bola')">
       <div class="shape-icon">
        ‚öΩ
       </div>
       <div class="shape-name">
        Bola
       </div>
      </div>
     </div>
     <div class="btn-group"><button class="btn" onclick="showPage('page-menu')">Kembali ke Menu</button>
     </div>
    </div>
   </div><!-- HALAMAN QUIZ -->
   <div class="page" id="page-quiz">
    <div class="header">
     <h1>üìù QUIZ <span id="quiz-shape-title"></span></h1>
     <p>Jawab 10 soal acak untuk mendapatkan skor!</p>
    </div>
    <div class="card">
     <div class="score-display">
      <div class="score-number" id="quiz-score">
       0
      </div>
      <div class="score-label">
       Skor Saat Ini
      </div>
     </div>
     <div class="progress-bar">
      <div class="progress-fill" id="quiz-progress" style="width: 0%">
       0/10
      </div>
     </div>
     <div class="quiz-container" id="quiz-container"></div>
     <div class="btn-group" id="quiz-buttons"><button class="btn" onclick="showPage('page-menu')">Menu Utama</button> <button class="btn btn-success" onclick="retryQuiz()">Coba Lagi (Soal Baru)</button>
     </div>
    </div>
   </div><!-- HALAMAN SERTIFIKAT -->
   <div class="page" id="page-sertifikat">
    <div class="header">
     <h1>üèÜ SERTIFIKAT KELULUSAN</h1>
     <p>Selamat atas pencapaian Anda!</p>
    </div>
    <div class="card">
     <div id="certificate-content">
      <div class="certificate-preview" id="certificate-preview">
       <h2 id="certificate-title">SERTIFIKAT KELULUSAN</h2>
       <h3>PROGRAM MEDIA INTERAKTIF BANGUN RUANG 3D ‚Äì SMP</h3>
       <p style="font-size: 1.2em; margin: 30px 0;">Diberikan kepada</p>
       <div class="student-name" id="cert-student-name">
        Nama Siswa
       </div>
       <div class="certificate-text">
        atas keberhasilan menyelesaikan pembelajaran<br>
         dan menjawab 10 soal acak.
       </div>
       <div style="margin: 30px 0;">
        <p style="font-size: 1.3em; margin: 10px 0;"><strong>Skor Akhir:</strong> <span id="cert-score">0</span></p>
        <div id="cert-badge"></div>
       </div>
       <div style="margin: 30px 0;">
        <p style="font-size: 1.1em;"><strong>Tanggal:</strong> <span id="cert-date"></span></p>
        <p style="font-size: 1.1em;"><strong>Nomor Sertifikat:</strong> <span id="cert-number"></span></p>
       </div>
       <div class="signature">
        <p style="margin-top: 50px; font-size: 1.1em;">Tanda Tangan Digital</p>
        <p style="font-size: 1.2em; font-weight: bold; margin-top: 10px;" id="teacher-name">Nama Guru</p>
       </div>
      </div>
     </div>
     <div class="btn-group"><button class="btn btn-success" onclick="downloadCertificatePDF()">üìÑ Download PDF</button> <button class="btn btn-warning" onclick="downloadCertificateJPG()">üñºÔ∏è Download JPG</button> <button class="btn" onclick="showPage('page-pilih-quiz')">Coba Quiz Lagi</button> <button class="btn" onclick="showPage('page-menu')">Kembali ke Menu</button>
     </div>
    </div>
   </div>
  </div>
  <script>
    // Bank soal untuk setiap bangun ruang (200 soal per bangun)
    const questionBank = {
      Kubus: generateKubusQuestions(),
      Balok: generateBalokQuestions(),
      Prisma: generatePrismaQuestions(),
      Limas: generateLimasQuestions(),
      Tabung: generateTabungQuestions(),
      Kerucut: generateKerucutQuestions(),
      Bola: generateBolaQuestions()
    };

    function generateKubusQuestions() {
      const questions = [];
      
      for (let i = 0; i < 50; i++) {
        questions.push({
          question: `Kubus memiliki berapa sisi yang sama besar?`,
          options: ["4 sisi", "5 sisi", "6 sisi", "8 sisi"],
          correct: 2
        });
        questions.push({
          question: `Semua rusuk kubus memiliki panjang yang...`,
          options: ["Berbeda", "Sama", "Acak", "Tidak tentu"],
          correct: 1
        });
      }
      
      for (let i = 0; i < 50; i++) {
        const s = Math.floor(Math.random() * 10) + 2;
        const volume = s * s * s;
        questions.push({
          question: `Sebuah kubus memiliki panjang rusuk ${s} cm. Berapakah volumenya?`,
          options: [`${volume - 10} cm¬≥`, `${volume} cm¬≥`, `${volume + 10} cm¬≥`, `${volume * 2} cm¬≥`],
          correct: 1
        });
      }
      
      for (let i = 0; i < 50; i++) {
        const s = Math.floor(Math.random() * 8) + 2;
        const luas = 6 * s * s;
        questions.push({
          question: `Luas permukaan kubus dengan rusuk ${s} cm adalah...`,
          options: [`${luas - 20} cm¬≤`, `${luas} cm¬≤`, `${luas + 20} cm¬≤`, `${s * s} cm¬≤`],
          correct: 1
        });
      }
      
      for (let i = 0; i < 50; i++) {
        questions.push({
          question: `Rumus volume kubus adalah...`,
          options: ["s √ó s", "s¬≥", "6 √ó s¬≤", "s + s + s"],
          correct: 1
        });
      }
      
      return questions;
    }

    function generateBalokQuestions() {
      const questions = [];
      
      for (let i = 0; i < 50; i++) {
        questions.push({
          question: `Balok memiliki berapa pasang sisi yang sama?`,
          options: ["1 pasang", "2 pasang", "3 pasang", "4 pasang"],
          correct: 2
        });
      }
      
      for (let i = 0; i < 100; i++) {
        const p = Math.floor(Math.random() * 10) + 3;
        const l = Math.floor(Math.random() * 8) + 2;
        const t = Math.floor(Math.random() * 6) + 2;
        const volume = p * l * t;
        questions.push({
          question: `Volume balok dengan panjang ${p} cm, lebar ${l} cm, dan tinggi ${t} cm adalah...`,
          options: [`${volume - 15} cm¬≥`, `${volume} cm¬≥`, `${volume + 15} cm¬≥`, `${p + l + t} cm¬≥`],
          correct: 1
        });
      }
      
      for (let i = 0; i < 50; i++) {
        questions.push({
          question: `Rumus volume balok adalah...`,
          options: ["p + l + t", "p √ó l √ó t", "p √ó l", "2(p + l + t)"],
          correct: 1
        });
      }
      
      return questions;
    }

    function generatePrismaQuestions() {
      const questions = [];
      
      for (let i = 0; i < 60; i++) {
        questions.push({
          question: `Prisma memiliki alas dan atap yang...`,
          options: ["Berbeda bentuk", "Sama bentuk dan ukuran", "Bulat", "Tidak beraturan"],
          correct: 1
        });
      }
      
      for (let i = 0; i < 80; i++) {
        const alas = Math.floor(Math.random() * 10) + 4;
        const tinggiSegitiga = Math.floor(Math.random() * 8) + 3;
        const tinggiPrisma = Math.floor(Math.random() * 12) + 5;
        const luasAlas = (alas * tinggiSegitiga) / 2;
        const volume = luasAlas * tinggiPrisma;
        questions.push({
          question: `Volume prisma segitiga dengan alas ${alas} cm, tinggi segitiga ${tinggiSegitiga} cm, dan tinggi prisma ${tinggiPrisma} cm adalah...`,
          options: [`${Math.floor(volume - 30)} cm¬≥`, `${Math.floor(volume)} cm¬≥`, `${Math.floor(volume + 30)} cm¬≥`, `${alas * tinggiSegitiga} cm¬≥`],
          correct: 1
        });
      }
      
      for (let i = 0; i < 60; i++) {
        questions.push({
          question: `Rumus volume prisma adalah...`,
          options: ["Luas alas √ó tinggi", "Luas alas + tinggi", "1/3 √ó luas alas √ó tinggi", "Luas alas √∑ tinggi"],
          correct: 0
        });
      }
      
      return questions;
    }

    function generateLimasQuestions() {
      const questions = [];
      
      for (let i = 0; i < 60; i++) {
        questions.push({
          question: `Limas memiliki puncak yang...`,
          options: ["Datar", "Runcing/lancip", "Bulat", "Tidak ada"],
          correct: 1
        });
      }
      
      for (let i = 0; i < 80; i++) {
        const sisi = Math.floor(Math.random() * 10) + 4;
        const tinggi = Math.floor(Math.random() * 12) + 5;
        const luasAlas = sisi * sisi;
        const volume = (luasAlas * tinggi) / 3;
        questions.push({
          question: `Volume limas persegi dengan sisi alas ${sisi} cm dan tinggi ${tinggi} cm adalah...`,
          options: [`${Math.floor(volume - 20)} cm¬≥`, `${Math.floor(volume)} cm¬≥`, `${Math.floor(volume + 20)} cm¬≥`, `${luasAlas * tinggi} cm¬≥`],
          correct: 1
        });
      }
      
      for (let i = 0; i < 60; i++) {
        questions.push({
          question: `Rumus volume limas adalah...`,
          options: ["Luas alas √ó tinggi", "1/2 √ó luas alas √ó tinggi", "1/3 √ó luas alas √ó tinggi", "2/3 √ó luas alas √ó tinggi"],
          correct: 2
        });
      }
      
      return questions;
    }

    function generateTabungQuestions() {
      const questions = [];
      
      for (let i = 0; i < 60; i++) {
        questions.push({
          question: `Alas dan tutup tabung berbentuk...`,
          options: ["Persegi", "Segitiga", "Lingkaran", "Trapesium"],
          correct: 2
        });
      }
      
      for (let i = 0; i < 80; i++) {
        const r = Math.floor(Math.random() * 8) + 3;
        const t = Math.floor(Math.random() * 12) + 5;
        const volume = Math.floor(3.14 * r * r * t);
        questions.push({
          question: `Volume tabung dengan jari-jari ${r} cm dan tinggi ${t} cm adalah... (œÄ = 3,14)`,
          options: [`${volume - 50} cm¬≥`, `${volume} cm¬≥`, `${volume + 50} cm¬≥`, `${r * r * t} cm¬≥`],
          correct: 1
        });
      }
      
      for (let i = 0; i < 60; i++) {
        questions.push({
          question: `Rumus volume tabung adalah...`,
          options: ["œÄ √ó r √ó t", "œÄ √ó r¬≤ √ó t", "œÄ √ó r¬≥", "2 √ó œÄ √ó r √ó t"],
          correct: 1
        });
      }
      
      return questions;
    }

    function generateKerucutQuestions() {
      const questions = [];
      
      for (let i = 0; i < 60; i++) {
        questions.push({
          question: `Kerucut memiliki alas berbentuk...`,
          options: ["Persegi", "Segitiga", "Lingkaran", "Oval"],
          correct: 2
        });
      }
      
      for (let i = 0; i < 80; i++) {
        const r = Math.floor(Math.random() * 8) + 3;
        const t = Math.floor(Math.random() * 12) + 5;
        const volume = Math.floor((3.14 * r * r * t) / 3);
        questions.push({
          question: `Volume kerucut dengan jari-jari ${r} cm dan tinggi ${t} cm adalah... (œÄ = 3,14)`,
          options: [`${volume - 30} cm¬≥`, `${volume} cm¬≥`, `${volume + 30} cm¬≥`, `${Math.floor(3.14 * r * r * t)} cm¬≥`],
          correct: 1
        });
      }
      
      for (let i = 0; i < 60; i++) {
        questions.push({
          question: `Rumus volume kerucut adalah...`,
          options: ["œÄ √ó r¬≤ √ó t", "1/3 √ó œÄ √ó r¬≤ √ó t", "1/2 √ó œÄ √ó r¬≤ √ó t", "2/3 √ó œÄ √ó r¬≤ √ó t"],
          correct: 1
        });
      }
      
      return questions;
    }

    function generateBolaQuestions() {
      const questions = [];
      
      for (let i = 0; i < 60; i++) {
        questions.push({
          question: `Bola memiliki bentuk yang...`,
          options: ["Kotak", "Bulat sempurna", "Lonjong", "Datar"],
          correct: 1
        });
      }
      
      for (let i = 0; i < 80; i++) {
        const r = Math.floor(Math.random() * 10) + 3;
        const volume = Math.floor((4 * 3.14 * r * r * r) / 3);
        questions.push({
          question: `Volume bola dengan jari-jari ${r} cm adalah... (œÄ = 3,14)`,
          options: [`${volume - 50} cm¬≥`, `${volume} cm¬≥`, `${volume + 50} cm¬≥`, `${Math.floor(3.14 * r * r * r)} cm¬≥`],
          correct: 1
        });
      }
      
      for (let i = 0; i < 60; i++) {
        questions.push({
          question: `Rumus volume bola adalah...`,
          options: ["œÄ √ó r¬≥", "4/3 √ó œÄ √ó r¬≥", "1/3 √ó œÄ √ó r¬≥", "2/3 √ó œÄ √ó r¬≥"],
          correct: 1
        });
      }
      
      return questions;
    }

    const defaultConfig = {
      app_title: "üìê MEDIA PEMBELAJARAN BANGUN RUANG 3D üìê",
      welcome_message: "Selamat datang di Media Pembelajaran Interaktif untuk Siswa SMP",
      login_button: "MASUK üöÄ",
      certificate_title: "SERTIFIKAT KELULUSAN",
      teacher_name: "Nama Guru",
      font_family: "Segoe UI",
      font_size: 16
    };

    let currentStudent = {
      nama: '',
      kelas: '',
      skor: 0,
      kategori: '',
      tanggal: '',
      nomorSertifikat: ''
    };

    let currentShape = '';
    let currentQuizQuestions = [];
    let currentQuizIndex = 0;
    let quizScore = 0;
    let answeredQuestions = new Set();
    let quizCompleted = false;
    
    // Model 3D variables
    let currentModelShape = '';
    let currentModelKelas = 7;
    let canvas3d, ctx3d;
    let rotation = { x: 0.3, y: 0.3 };
    let zoom = 1;
    let isDragging = false;
    let lastMouseX = 0;
    let lastMouseY = 0;
    let autoRotate = false;
    let animationId = null;

    function shuffleArray(array) {
      const newArray = [...array];
      for (let i = newArray.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
      }
      return newArray;
    }

    function getRandomQuestions(shape, count = 10) {
      const allQuestions = questionBank[shape];
      const shuffled = shuffleArray(allQuestions);
      return shuffled.slice(0, count);
    }

    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
      });
      document.getElementById(pageId).classList.add('active');
    }

    function showToast(message, type = 'success') {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.className = `toast ${type} show`;
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    function handleLogin(event) {
      event.preventDefault();
      
      const nama = document.getElementById('nama').value.trim();
      const kelas = document.getElementById('kelas').value;
      
      if (!nama || !kelas) {
        showToast('Mohon isi nama dan pilih kelas!', 'error');
        return;
      }
      
      currentStudent.nama = nama;
      currentStudent.kelas = kelas;
      
      document.getElementById('student-name').textContent = nama;
      document.getElementById('student-kelas').textContent = kelas;
      
      showToast(`Selamat datang, ${nama}! üéâ`, 'success');
      showPage('page-menu');
    }

    function logout() {
      if (quizCompleted) {
        currentStudent = {
          nama: '',
          kelas: '',
          skor: 0,
          kategori: '',
          tanggal: '',
          nomorSertifikat: ''
        };
        quizCompleted = false;
        document.getElementById('nama').value = '';
        document.getElementById('kelas').value = '';
        showPage('page-login');
        showToast('Anda telah keluar. Sampai jumpa! üëã', 'success');
      } else {
        showToast('Selesaikan quiz terlebih dahulu untuk mendapatkan sertifikat!', 'error');
      }
    }

    function showMateriKelas(kelas) {
      showPage(`page-materi-${kelas}`);
      showToast(`Materi Kelas ${kelas} üìö`, 'success');
    }

    function showModel3D(shape, kelas) {
      currentModelShape = shape;
      currentModelKelas = kelas;
      
      document.getElementById('model-title').textContent = shape;
      
      showPage('page-model3d');
      
      setTimeout(() => {
        initCanvas3D();
        updateModelInfo();
        draw3DModel();
      }, 100);
      
      showToast(`Model 3D ${shape} dimuat! üé®`, 'success');
    }

    function backFromModel() {
      if (animationId) {
        cancelAnimationFrame(animationId);
        animationId = null;
      }
      autoRotate = false;
      showPage(`page-materi-${currentModelKelas}`);
    }

    function showNextMaterial() {
      const shapes = {
        7: ['Kubus', 'Balok', 'Prisma'],
        8: ['Kubus', 'Balok', 'Prisma', 'Limas'],
        9: ['Tabung', 'Kerucut', 'Bola']
      };
      
      const currentShapes = shapes[currentModelKelas];
      const currentIndex = currentShapes.indexOf(currentModelShape);
      
      if (currentIndex < currentShapes.length - 1) {
        showModel3D(currentShapes[currentIndex + 1], currentModelKelas);
      } else {
        const nextKelas = currentModelKelas < 9 ? currentModelKelas + 1 : 7;
        showMateriKelas(nextKelas);
      }
    }

    function initCanvas3D() {
      canvas3d = document.getElementById('canvas3d');
      if (!canvas3d) return;
      
      ctx3d = canvas3d.getContext('2d');
      canvas3d.width = canvas3d.offsetWidth;
      canvas3d.height = 500;
      
      rotation = { x: 0.3, y: 0.3 };
      zoom = 1;
      
      canvas3d.addEventListener('mousedown', handleMouseDown);
      canvas3d.addEventListener('mousemove', handleMouseMove);
      canvas3d.addEventListener('mouseup', handleMouseUp);
      canvas3d.addEventListener('wheel', handleWheel);
      canvas3d.addEventListener('click', handleCanvasClick);
    }

    function handleMouseDown(e) {
      isDragging = true;
      lastMouseX = e.clientX;
      lastMouseY = e.clientY;
    }

    function handleMouseMove(e) {
      if (!isDragging) return;
      
      const deltaX = e.clientX - lastMouseX;
      const deltaY = e.clientY - lastMouseY;
      
      rotation.y += deltaX * 0.01;
      rotation.x += deltaY * 0.01;
      
      lastMouseX = e.clientX;
      lastMouseY = e.clientY;
      
      draw3DModel();
    }

    function handleMouseUp() {
      isDragging = false;
    }

    function handleWheel(e) {
      e.preventDefault();
      zoom += e.deltaY * -0.001;
      zoom = Math.max(0.5, Math.min(2, zoom));
      draw3DModel();
    }

    function handleCanvasClick(e) {
      const rect = canvas3d.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      
      showClickedInfo(x, y);
    }

    function showClickedInfo(x, y) {
      const clickedInfoDiv = document.getElementById('clicked-info');
      clickedInfoDiv.style.display = 'block';
      
      let infoHTML = '<h3 style="color: #667eea; margin-bottom: 15px;">üìç Informasi Bagian yang Diklik</h3>';
      
      if (currentModelKelas === 7) {
        infoHTML += `
          <p style="font-size: 1.1em; line-height: 1.8;">
            <strong>Bagian ${currentModelShape}:</strong><br>
            ‚Ä¢ <strong>Sisi:</strong> Bidang datar yang membatasi bangun ruang<br>
            ‚Ä¢ <strong>Rusuk:</strong> Garis pertemuan antara dua sisi<br>
            ‚Ä¢ <strong>Titik Sudut:</strong> Titik pertemuan antara rusuk-rusuk<br><br>
            <em>Klik bagian lain untuk melihat informasi lebih lanjut!</em>
          </p>
        `;
      } else {
        const formulas = getShapeFormulas(currentModelShape);
        infoHTML += `
          <p style="font-size: 1.1em; line-height: 1.8;">
            <strong>Rumus ${currentModelShape}:</strong><br>
            ${formulas.luas}<br>
            ${formulas.volume}<br><br>
            <strong>Contoh Benda:</strong><br>
            ${formulas.contoh}
          </p>
        `;
      }
      
      clickedInfoDiv.innerHTML = infoHTML;
      
      setTimeout(() => {
        clickedInfoDiv.style.display = 'none';
      }, 5000);
    }

    function getShapeFormulas(shape) {
      const formulas = {
        'Kubus': {
          luas: '‚Ä¢ Luas Permukaan = 6 √ó s¬≤',
          volume: '‚Ä¢ Volume = s¬≥',
          contoh: 'Dadu, rubik, kotak kado'
        },
        'Balok': {
          luas: '‚Ä¢ Luas Permukaan = 2(pl + pt + lt)',
          volume: '‚Ä¢ Volume = p √ó l √ó t',
          contoh: 'Kotak sepatu, lemari, akuarium'
        },
        'Prisma': {
          luas: '‚Ä¢ Luas Permukaan = (2 √ó luas alas) + (keliling alas √ó tinggi)',
          volume: '‚Ä¢ Volume = luas alas √ó tinggi',
          contoh: 'Atap rumah, tenda, toblerone'
        },
        'Limas': {
          luas: '‚Ä¢ Luas Permukaan = luas alas + jumlah luas sisi tegak',
          volume: '‚Ä¢ Volume = 1/3 √ó luas alas √ó tinggi',
          contoh: 'Piramida, atap joglo'
        },
        'Tabung': {
          luas: '‚Ä¢ Luas Permukaan = 2œÄr¬≤ + 2œÄrt',
          volume: '‚Ä¢ Volume = œÄr¬≤t',
          contoh: 'Kaleng susu, drum, pipa, gelas'
        },
        'Kerucut': {
          luas: '‚Ä¢ Luas Permukaan = œÄr¬≤ + œÄrs',
          volume: '‚Ä¢ Volume = 1/3 √ó œÄr¬≤t',
          contoh: 'Es krim cone, topi ulang tahun'
        },
        'Bola': {
          luas: '‚Ä¢ Luas Permukaan = 4œÄr¬≤',
          volume: '‚Ä¢ Volume = 4/3 √ó œÄr¬≥',
          contoh: 'Bola sepak, bola basket, kelereng'
        }
      };
      
      return formulas[shape] || formulas['Kubus'];
    }

    function toggleAutoRotate() {
      autoRotate = !autoRotate;
      const btnText = document.getElementById('rotate-btn-text');
      
      if (autoRotate) {
        btnText.textContent = '‚è∏Ô∏è Hentikan Rotasi';
        animate3D();
      } else {
        btnText.textContent = '‚ñ∂Ô∏è Putar Otomatis';
        if (animationId) {
          cancelAnimationFrame(animationId);
          animationId = null;
        }
      }
    }

    function resetCamera() {
      rotation = { x: 0.3, y: 0.3 };
      zoom = 1;
      draw3DModel();
      showToast('Posisi kamera direset! üîÑ', 'success');
    }

    function animate3D() {
      if (!autoRotate) return;
      
      rotation.y += 0.02;
      draw3DModel();
      
      animationId = requestAnimationFrame(animate3D);
    }

    function updateModelInfo() {
      const infoDiv = document.getElementById('model-info');
      let infoHTML = '';
      
      if (currentModelKelas === 7) {
        infoHTML = `
          <h3 style="color: #667eea; margin-bottom: 15px;">üìñ Informasi ${currentModelShape}</h3>
          <p style="font-size: 1.1em; line-height: 1.8;">
            <strong>${currentModelShape}</strong> adalah salah satu bangun ruang yang dipelajari di kelas 7.<br><br>
            Gunakan mouse untuk memutar model dan melihat dari berbagai sudut pandang.<br>
            Klik pada bagian model untuk melihat informasi tentang sisi, rusuk, dan titik sudut.
          </p>
        `;
      } else {
        const formulas = getShapeFormulas(currentModelShape);
        infoHTML = `
          <h3 style="color: #667eea; margin-bottom: 15px;">üìê Rumus ${currentModelShape}</h3>
          <p style="font-size: 1.1em; line-height: 1.8;">
            ${formulas.luas}<br>
            ${formulas.volume}<br><br>
            <strong>Contoh dalam kehidupan sehari-hari:</strong><br>
            ${formulas.contoh}
          </p>
        `;
      }
      
      infoDiv.innerHTML = infoHTML;
    }

    function draw3DModel() {
      if (!ctx3d || !canvas3d) return;
      
      ctx3d.clearRect(0, 0, canvas3d.width, canvas3d.height);
      
      const centerX = canvas3d.width / 2;
      const centerY = canvas3d.height / 2;
      const scale = 80 * zoom;
      
      ctx3d.save();
      ctx3d.translate(centerX, centerY);
      
      switch(currentModelShape) {
        case 'Kubus':
          drawCube(ctx3d, scale);
          break;
        case 'Balok':
          drawBox(ctx3d, scale);
          break;
        case 'Prisma':
          drawPrism(ctx3d, scale);
          break;
        case 'Limas':
          drawPyramid(ctx3d, scale);
          break;
        case 'Tabung':
          drawCylinder(ctx3d, scale);
          break;
        case 'Kerucut':
          drawCone(ctx3d, scale);
          break;
        case 'Bola':
          drawSphere(ctx3d, scale);
          break;
      }
      
      ctx3d.restore();
    }

    function project3D(x, y, z, scale) {
      const cosX = Math.cos(rotation.x);
      const sinX = Math.sin(rotation.x);
      const cosY = Math.cos(rotation.y);
      const sinY = Math.sin(rotation.y);
      
      let y1 = y * cosX - z * sinX;
      let z1 = y * sinX + z * cosX;
      
      let x2 = x * cosY - z1 * sinY;
      let z2 = x * sinY + z1 * cosY;
      
      return {
        x: x2 * scale,
        y: y1 * scale,
        z: z2
      };
    }

    function drawCube(ctx, scale) {
      const vertices = [
        [-1, -1, -1], [1, -1, -1], [1, 1, -1], [-1, 1, -1],
        [-1, -1, 1], [1, -1, 1], [1, 1, 1], [-1, 1, 1]
      ];
      
      const faces = [
        [0, 1, 2, 3], [4, 5, 6, 7], [0, 1, 5, 4],
        [2, 3, 7, 6], [0, 3, 7, 4], [1, 2, 6, 5]
      ];
      
      const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8', '#F7DC6F'];
      
      const projectedVertices = vertices.map(v => project3D(v[0], v[1], v[2], scale));
      
      const facesWithDepth = faces.map((face, i) => {
        const avgZ = face.reduce((sum, idx) => sum + projectedVertices[idx].z, 0) / face.length;
        return { face, color: colors[i], depth: avgZ };
      });
      
      facesWithDepth.sort((a, b) => a.depth - b.depth);
      
      facesWithDepth.forEach(({ face, color }) => {
        ctx.beginPath();
        ctx.moveTo(projectedVertices[face[0]].x, projectedVertices[face[0]].y);
        for (let i = 1; i < face.length; i++) {
          ctx.lineTo(projectedVertices[face[i]].x, projectedVertices[face[i]].y);
        }
        ctx.closePath();
        ctx.fillStyle = color;
        ctx.fill();
        ctx.strokeStyle = '#333';
        ctx.lineWidth = 2;
        ctx.stroke();
      });
    }

    function drawBox(ctx, scale) {
      const vertices = [
        [-1.5, -1, -0.8], [1.5, -1, -0.8], [1.5, 1, -0.8], [-1.5, 1, -0.8],
        [-1.5, -1, 0.8], [1.5, -1, 0.8], [1.5, 1, 0.8], [-1.5, 1, 0.8]
      ];
      
      const faces = [
        [0, 1, 2, 3], [4, 5, 6, 7], [0, 1, 5, 4],
        [2, 3, 7, 6], [0, 3, 7, 4], [1, 2, 6, 5]
      ];
      
      const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8', '#F7DC6F'];
      
      const projectedVertices = vertices.map(v => project3D(v[0], v[1], v[2], scale));
      
      const facesWithDepth = faces.map((face, i) => {
        const avgZ = face.reduce((sum, idx) => sum + projectedVertices[idx].z, 0) / face.length;
        return { face, color: colors[i], depth: avgZ };
      });
      
      facesWithDepth.sort((a, b) => a.depth - b.depth);
      
      facesWithDepth.forEach(({ face, color }) => {
        ctx.beginPath();
        ctx.moveTo(projectedVertices[face[0]].x, projectedVertices[face[0]].y);
        for (let i = 1; i < face.length; i++) {
          ctx.lineTo(projectedVertices[face[i]].x, projectedVertices[face[i]].y);
        }
        ctx.closePath();
        ctx.fillStyle = color;
        ctx.fill();
        ctx.strokeStyle = '#333';
        ctx.lineWidth = 2;
        ctx.stroke();
      });
    }

    function drawPrism(ctx, scale) {
      const vertices = [
        [0, -1.2, 0], [-1, 0.6, 0], [1, 0.6, 0],
        [0, -1.2, 1.5], [-1, 0.6, 1.5], [1, 0.6, 1.5]
      ];
      
      const faces = [
        [0, 1, 2], [3, 4, 5], [0, 1, 4, 3], [1, 2, 5, 4], [2, 0, 3, 5]
      ];
      
      const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8'];
      
      const projectedVertices = vertices.map(v => project3D(v[0], v[1], v[2], scale));
      
      const facesWithDepth = faces.map((face, i) => {
        const avgZ = face.reduce((sum, idx) => sum + projectedVertices[idx].z, 0) / face.length;
        return { face, color: colors[i], depth: avgZ };
      });
      
      facesWithDepth.sort((a, b) => a.depth - b.depth);
      
      facesWithDepth.forEach(({ face, color }) => {
        ctx.beginPath();
        ctx.moveTo(projectedVertices[face[0]].x, projectedVertices[face[0]].y);
        for (let i = 1; i < face.length; i++) {
          ctx.lineTo(projectedVertices[face[i]].x, projectedVertices[face[i]].y);
        }
        ctx.closePath();
        ctx.fillStyle = color;
        ctx.fill();
        ctx.strokeStyle = '#333';
        ctx.lineWidth = 2;
        ctx.stroke();
      });
    }

    function drawPyramid(ctx, scale) {
      const vertices = [
        [-1, 0, -1], [1, 0, -1], [1, 0, 1], [-1, 0, 1], [0, -1.5, 0]
      ];
      
      const faces = [
        [0, 1, 2, 3], [0, 1, 4], [1, 2, 4], [2, 3, 4], [3, 0, 4]
      ];
      
      const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8'];
      
      const projectedVertices = vertices.map(v => project3D(v[0], v[1], v[2], scale));
      
      const facesWithDepth = faces.map((face, i) => {
        const avgZ = face.reduce((sum, idx) => sum + projectedVertices[idx].z, 0) / face.length;
        return { face, color: colors[i], depth: avgZ };
      });
      
      facesWithDepth.sort((a, b) => a.depth - b.depth);
      
      facesWithDepth.forEach(({ face, color }) => {
        ctx.beginPath();
        ctx.moveTo(projectedVertices[face[0]].x, projectedVertices[face[0]].y);
        for (let i = 1; i < face.length; i++) {
          ctx.lineTo(projectedVertices[face[i]].x, projectedVertices[face[i]].y);
        }
        ctx.closePath();
        ctx.fillStyle = color;
        ctx.fill();
        ctx.strokeStyle = '#333';
        ctx.lineWidth = 2;
        ctx.stroke();
      });
    }

    function drawCylinder(ctx, scale) {
      const segments = 32;
      const radius = 1;
      const height = 2;
      
      ctx.fillStyle = '#4ECDC4';
      ctx.strokeStyle = '#333';
      ctx.lineWidth = 2;
      
      for (let i = 0; i < segments; i++) {
        const angle1 = (i / segments) * Math.PI * 2;
        const angle2 = ((i + 1) / segments) * Math.PI * 2;
        
        const x1 = Math.cos(angle1) * radius;
        const z1 = Math.sin(angle1) * radius;
        const x2 = Math.cos(angle2) * radius;
        const z2 = Math.sin(angle2) * radius;
        
        const p1 = project3D(x1, -height/2, z1, scale);
        const p2 = project3D(x2, -height/2, z2, scale);
        const p3 = project3D(x2, height/2, z2, scale);
        const p4 = project3D(x1, height/2, z1, scale);
        
        ctx.beginPath();
        ctx.moveTo(p1.x, p1.y);
        ctx.lineTo(p2.x, p2.y);
        ctx.lineTo(p3.x, p3.y);
        ctx.lineTo(p4.x, p4.y);
        ctx.closePath();
        ctx.fill();
        ctx.stroke();
      }
      
      ctx.fillStyle = '#FF6B6B';
      ctx.beginPath();
      for (let i = 0; i <= segments; i++) {
        const angle = (i / segments) * Math.PI * 2;
        const x = Math.cos(angle) * radius;
        const z = Math.sin(angle) * radius;
        const p = project3D(x, height/2, z, scale);
        if (i === 0) ctx.moveTo(p.x, p.y);
        else ctx.lineTo(p.x, p.y);
      }
      ctx.closePath();
      ctx.fill();
      ctx.stroke();
    }

    function drawCone(ctx, scale) {
      const segments = 32;
      const radius = 1;
      const height = 2;
      
      const apex = project3D(0, -height, 0, scale);
      
      ctx.fillStyle = '#FFA07A';
      ctx.strokeStyle = '#333';
      ctx.lineWidth = 2;
      
      for (let i = 0; i < segments; i++) {
        const angle1 = (i / segments) * Math.PI * 2;
        const angle2 = ((i + 1) / segments) * Math.PI * 2;
        
        const x1 = Math.cos(angle1) * radius;
        const z1 = Math.sin(angle1) * radius;
        const x2 = Math.cos(angle2) * radius;
        const z2 = Math.sin(angle2) * radius;
        
        const p1 = project3D(x1, 0, z1, scale);
        const p2 = project3D(x2, 0, z2, scale);
        
        ctx.beginPath();
        ctx.moveTo(apex.x, apex.y);
        ctx.lineTo(p1.x, p1.y);
        ctx.lineTo(p2.x, p2.y);
        ctx.closePath();
        ctx.fill();
        ctx.stroke();
      }
      
      ctx.fillStyle = '#FF6B6B';
      ctx.beginPath();
      for (let i = 0; i <= segments; i++) {
        const angle = (i / segments) * Math.PI * 2;
        const x = Math.cos(angle) * radius;
        const z = Math.sin(angle) * radius;
        const p = project3D(x, 0, z, scale);
        if (i === 0) ctx.moveTo(p.x, p.y);
        else ctx.lineTo(p.x, p.y);
      }
      ctx.closePath();
      ctx.fill();
      ctx.stroke();
    }

    function drawSphere(ctx, scale) {
      const segments = 16;
      
      for (let lat = 0; lat < segments; lat++) {
        for (let lon = 0; lon < segments; lon++) {
          const theta1 = (lat / segments) * Math.PI;
          const theta2 = ((lat + 1) / segments) * Math.PI;
          const phi1 = (lon / segments) * Math.PI * 2;
          const phi2 = ((lon + 1) / segments) * Math.PI * 2;
          
          const x1 = Math.sin(theta1) * Math.cos(phi1);
          const y1 = Math.cos(theta1);
          const z1 = Math.sin(theta1) * Math.sin(phi1);
          
          const x2 = Math.sin(theta1) * Math.cos(phi2);
          const y2 = Math.cos(theta1);
          const z2 = Math.sin(theta1) * Math.sin(phi2);
          
          const x3 = Math.sin(theta2) * Math.cos(phi2);
          const y3 = Math.cos(theta2);
          const z3 = Math.sin(theta2) * Math.sin(phi2);
          
          const x4 = Math.sin(theta2) * Math.cos(phi1);
          const y4 = Math.cos(theta2);
          const z4 = Math.sin(theta2) * Math.sin(phi1);
          
          const p1 = project3D(x1, y1, z1, scale);
          const p2 = project3D(x2, y2, z2, scale);
          const p3 = project3D(x3, y3, z3, scale);
          const p4 = project3D(x4, y4, z4, scale);
          
          const hue = (lat * 20 + lon * 10) % 360;
          ctx.fillStyle = `hsl(${hue}, 70%, 60%)`;
          ctx.strokeStyle = '#333';
          ctx.lineWidth = 1;
          
          ctx.beginPath();
          ctx.moveTo(p1.x, p1.y);
          ctx.lineTo(p2.x, p2.y);
          ctx.lineTo(p3.x, p3.y);
          ctx.lineTo(p4.x, p4.y);
          ctx.closePath();
          ctx.fill();
          ctx.stroke();
        }
      }
    }

    function startQuiz(shape) {
      currentShape = shape;
      currentQuizQuestions = getRandomQuestions(shape, 10);
      currentQuizIndex = 0;
      quizScore = 0;
      answeredQuestions.clear();
      
      document.getElementById('quiz-shape-title').textContent = shape.toUpperCase();
      document.getElementById('quiz-score').textContent = '0';
      
      showPage('page-quiz');
      renderQuiz();
      showToast(`Quiz ${shape} dimulai! üìù`, 'success');
    }

    function renderQuiz() {
      const container = document.getElementById('quiz-container');
      container.innerHTML = '';
      
      if (currentQuizIndex >= currentQuizQuestions.length) {
        currentStudent.skor = quizScore;
        
        let kategori = '';
        if (quizScore >= 80) {
          kategori = 'Ahli Bangun Ruang';
        } else if (quizScore >= 40) {
          kategori = 'Penjelajah';
        } else {
          kategori = 'Pemula';
        }
        currentStudent.kategori = kategori;
        
        container.innerHTML = `
          <div style="text-align: center; padding: 50px;">
            <h2 style="color: #667eea; margin-bottom: 25px;">üéâ Quiz Selesai! üéâ</h2>
            <p style="font-size: 1.5em; margin: 25px 0;">Skor Anda: <strong>${quizScore}</strong></p>
            <p style="font-size: 1.3em; color: #666;">Kategori: <strong>${kategori}</strong></p>
            <p style="color: #666; font-size: 1.1em; margin-top: 30px;">Klik "Coba Lagi" untuk quiz baru dengan soal yang berbeda!</p>
          </div>
        `;
        
        quizCompleted = true;
        saveQuizResult();
        return;
      }
      
      const question = currentQuizQuestions[currentQuizIndex];
      const questionDiv = document.createElement('div');
      questionDiv.className = 'quiz-question';
      
      let optionsHTML = '';
      question.options.forEach((option, index) => {
        const isAnswered = answeredQuestions.has(currentQuizIndex);
        const isCorrect = index === question.correct;
        let optionClass = '';
        
        if (isAnswered) {
          if (isCorrect) {
            optionClass = 'correct';
          }
          optionClass += ' disabled';
        }
        
        optionsHTML += `
          <div class="quiz-option ${optionClass}" onclick="checkAnswer(${index}, ${question.correct})">
            ${option}
          </div>
        `;
      });
      
      questionDiv.innerHTML = `
        <h3>Soal ${currentQuizIndex + 1} dari ${currentQuizQuestions.length}</h3>
        <div class="quiz-question-text">${question.question}</div>
        <div class="quiz-options">
          ${optionsHTML}
        </div>
      `;
      
      container.appendChild(questionDiv);
      updateQuizProgress();
    }

    function checkAnswer(selected, correct) {
      if (answeredQuestions.has(currentQuizIndex)) {
        return;
      }
      
      answeredQuestions.add(currentQuizIndex);
      
      const options = document.querySelectorAll('.quiz-option');
      
      if (selected === correct) {
        options[selected].classList.add('correct');
        quizScore += 10;
        showToast('‚úÖ Benar! +10 poin', 'success');
      } else {
        options[selected].classList.add('wrong');
        options[correct].classList.add('correct');
        showToast('‚ùå Salah! Jawaban yang benar ditandai hijau', 'error');
      }
      
      options.forEach(opt => opt.classList.add('disabled'));
      
      document.getElementById('quiz-score').textContent = quizScore;
      
      updateQuizProgress();
      
      setTimeout(() => {
        currentQuizIndex++;
        renderQuiz();
      }, 2500);
    }

    function updateQuizProgress() {
      const progress = ((currentQuizIndex + 1) / currentQuizQuestions.length) * 100;
      const progressFill = document.getElementById('quiz-progress');
      progressFill.style.width = `${Math.min(progress, 100)}%`;
      progressFill.textContent = `${currentQuizIndex + 1}/${currentQuizQuestions.length}`;
    }

    function retryQuiz() {
      if (!currentShape) {
        showPage('page-pilih-quiz');
        return;
      }
      startQuiz(currentShape);
    }

    async function saveQuizResult() {
      if (!window.dataSdk) return;
      
      const now = new Date();
      const tanggal = now.toLocaleDateString('id-ID', { 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric' 
      });
      const nomorSertifikat = `SRT-${now.getFullYear()}${String(now.getMonth() + 1).padStart(2, '0')}${String(now.getDate()).padStart(2, '0')}-${String(now.getHours()).padStart(2, '0')}${String(now.getMinutes()).padStart(2, '0')}${String(now.getSeconds()).padStart(2, '0')}`;
      
      currentStudent.tanggal = tanggal;
      currentStudent.nomorSertifikat = nomorSertifikat;
      
      const record = {
        id: Date.now().toString(),
        nama: currentStudent.nama,
        kelas: currentStudent.kelas,
        skor: currentStudent.skor,
        kategori: currentStudent.kategori,
        tanggal: tanggal,
        nomor_sertifikat: nomorSertifikat
      };
      
      const result = await window.dataSdk.create(record);
      
      if (result.isOk) {
        showToast('Hasil quiz tersimpan! üíæ', 'success');
      } else {
        showToast('Gagal menyimpan hasil quiz', 'error');
      }
    }

    function showCertificatePage() {
      if (!quizCompleted) {
        showToast('Selesaikan quiz terlebih dahulu untuk mendapatkan sertifikat!', 'error');
        return;
      }
      
      document.getElementById('cert-student-name').textContent = currentStudent.nama;
      document.getElementById('cert-score').textContent = currentStudent.skor;
      document.getElementById('cert-date').textContent = currentStudent.tanggal;
      document.getElementById('cert-number').textContent = currentStudent.nomorSertifikat;
      
      const badgeContainer = document.getElementById('cert-badge');
      let badgeClass = '';
      let badgeText = '';
      
      if (currentStudent.skor >= 80) {
        badgeClass = 'badge-ahli';
        badgeText = 'ü•á Ahli Bangun Ruang';
      } else if (currentStudent.skor >= 40) {
        badgeClass = 'badge-penjelajah';
        badgeText = 'ü•à Penjelajah';
      } else {
        badgeClass = 'badge-pemula';
        badgeText = 'ü•â Pemula';
      }
      
      badgeContainer.innerHTML = `<div class="badge ${badgeClass}">${badgeText}</div>`;
      
      showPage('page-sertifikat');
      showToast('Sertifikat Anda siap! üèÜ', 'success');
    }

    function downloadCertificatePDF() {
      showToast('Sertifikat PDF akan segera diunduh! üìÑ', 'success');
      
      const canvas = document.createElement('canvas');
      canvas.width = 1200;
      canvas.height = 900;
      const ctx = canvas.getContext('2d');
      
      const gradient = ctx.createLinearGradient(0, 0, 1200, 900);
      gradient.addColorStop(0, '#667eea');
      gradient.addColorStop(1, '#764ba2');
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, 1200, 900);
      
      ctx.fillStyle = 'white';
      ctx.fillRect(80, 80, 1040, 740);
      
      ctx.strokeStyle = '#667eea';
      ctx.lineWidth = 10;
      ctx.strokeRect(100, 100, 1000, 700);
      
      ctx.fillStyle = '#667eea';
      ctx.font = 'bold 50px Arial';
      ctx.textAlign = 'center';
      ctx.fillText('SERTIFIKAT KELULUSAN', 600, 180);
      
      ctx.font = '32px Arial';
      ctx.fillStyle = '#764ba2';
      ctx.fillText('PROGRAM MEDIA INTERAKTIF BANGUN RUANG 3D ‚Äì SMP', 600, 230);
      
      ctx.font = '28px Arial';
      ctx.fillStyle = '#333';
      ctx.fillText('Diberikan kepada:', 600, 300);
      
      ctx.font = 'bold 48px Arial';
      ctx.fillStyle = '#667eea';
      ctx.fillText(currentStudent.nama, 600, 370);
      
      ctx.font = '26px Arial';
      ctx.fillStyle = '#666';
      ctx.fillText('atas keberhasilan menyelesaikan pembelajaran', 600, 430);
      ctx.fillText('dan menjawab 10 soal acak.', 600, 465);
      
      ctx.font = 'bold 36px Arial';
      ctx.fillStyle = '#333';
      ctx.fillText(`Skor Akhir: ${currentStudent.skor}`, 600, 530);
      
      ctx.font = 'bold 32px Arial';
      let badgeColor = '';
      if (currentStudent.skor >= 80) {
        badgeColor = '#ffd93d';
      } else if (currentStudent.skor >= 40) {
        badgeColor = '#90cdf4';
      } else {
        badgeColor = '#cbd5e0';
      }
      ctx.fillStyle = badgeColor;
      ctx.fillText(`Kategori: ${currentStudent.kategori}`, 600, 580);
      
      ctx.font = '24px Arial';
      ctx.fillStyle = '#666';
      ctx.fillText(`Tanggal: ${currentStudent.tanggal}`, 600, 650);
      ctx.fillText(`Nomor Sertifikat: ${currentStudent.nomorSertifikat}`, 600, 685);
      
      ctx.font = 'italic 22px Arial';
      ctx.fillStyle = '#999';
      ctx.fillText('Tanda Tangan Digital', 600, 740);
      
      ctx.font = 'bold 26px Arial';
      ctx.fillStyle = '#333';
      const teacherName = document.getElementById('teacher-name').textContent;
      ctx.fillText(teacherName, 600, 775);
      
      canvas.toBlob((blob) => {
        const link = document.createElement('a');
        link.download = `Sertifikat_${currentStudent.nama.replace(/\s+/g, '_')}.png`;
        link.href = URL.createObjectURL(blob);
        link.click();
      });
    }

    function downloadCertificateJPG() {
      showToast('Sertifikat JPG akan segera diunduh! üñºÔ∏è', 'success');
      
      const canvas = document.createElement('canvas');
      canvas.width = 1200;
      canvas.height = 900;
      const ctx = canvas.getContext('2d');
      
      const gradient = ctx.createLinearGradient(0, 0, 1200, 900);
      gradient.addColorStop(0, '#667eea');
      gradient.addColorStop(1, '#764ba2');
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, 1200, 900);
      
      ctx.fillStyle = 'white';
      ctx.fillRect(80, 80, 1040, 740);
      
      ctx.strokeStyle = '#667eea';
      ctx.lineWidth = 10;
      ctx.strokeRect(100, 100, 1000, 700);
      
      ctx.fillStyle = '#667eea';
      ctx.font = 'bold 50px Arial';
      ctx.textAlign = 'center';
      ctx.fillText('SERTIFIKAT KELULUSAN', 600, 180);
      
      ctx.font = '32px Arial';
      ctx.fillStyle = '#764ba2';
      ctx.fillText('PROGRAM MEDIA INTERAKTIF BANGUN RUANG 3D ‚Äì SMP', 600, 230);
      
      ctx.font = '28px Arial';
      ctx.fillStyle = '#333';
      ctx.fillText('Diberikan kepada:', 600, 300);
      
      ctx.font = 'bold 48px Arial';
      ctx.fillStyle = '#667eea';
      ctx.fillText(currentStudent.nama, 600, 370);
      
      ctx.font = '26px Arial';
      ctx.fillStyle = '#666';
      ctx.fillText('atas keberhasilan menyelesaikan pembelajaran', 600, 430);
      ctx.fillText('dan menjawab 10 soal acak.', 600, 465);
      
      ctx.font = 'bold 36px Arial';
      ctx.fillStyle = '#333';
      ctx.fillText(`Skor Akhir: ${currentStudent.skor}`, 600, 530);
      
      ctx.font = 'bold 32px Arial';
      let badgeColor = '';
      if (currentStudent.skor >= 80) {
        badgeColor = '#ffd93d';
      } else if (currentStudent.skor >= 40) {
        badgeColor = '#90cdf4';
      } else {
        badgeColor = '#cbd5e0';
      }
      ctx.fillStyle = badgeColor;
      ctx.fillText(`Kategori: ${currentStudent.kategori}`, 600, 580);
      
      ctx.font = '24px Arial';
      ctx.fillStyle = '#666';
      ctx.fillText(`Tanggal: ${currentStudent.tanggal}`, 600, 650);
      ctx.fillText(`Nomor Sertifikat: ${currentStudent.nomorSertifikat}`, 600, 685);
      
      ctx.font = 'italic 22px Arial';
      ctx.fillStyle = '#999';
      ctx.fillText('Tanda Tangan Digital', 600, 740);
      
      ctx.font = 'bold 26px Arial';
      ctx.fillStyle = '#333';
      const teacherName = document.getElementById('teacher-name').textContent;
      ctx.fillText(teacherName, 600, 775);
      
      const link = document.createElement('a');
      link.download = `Sertifikat_${currentStudent.nama.replace(/\s+/g, '_')}.jpg`;
      link.href = canvas.toDataURL('image/jpeg', 0.95);
      link.click();
    }

    const dataHandler = {
      onDataChanged(data) {
        console.log('Data updated:', data.length, 'records');
      }
    };

    async function onConfigChange(config) {
      const appTitle = config.app_title || defaultConfig.app_title;
      const welcomeMessage = config.welcome_message || defaultConfig.welcome_message;
      const loginButton = config.login_button || defaultConfig.login_button;
      const certificateTitle = config.certificate_title || defaultConfig.certificate_title;
      const teacherName = config.teacher_name || defaultConfig.teacher_name;
      
      const customFont = config.font_family || defaultConfig.font_family;
      const baseFontStack = 'Arial, sans-serif';
      const baseSize = config.font_size || defaultConfig.font_size;
      
      document.getElementById('app-title').textContent = appTitle;
      document.getElementById('welcome-message').textContent = welcomeMessage;
      document.getElementById('login-button').textContent = loginButton;
      document.getElementById('certificate-title').textContent = certificateTitle;
      document.getElementById('teacher-name').textContent = teacherName;
      
      document.body.style.fontFamily = `${customFont}, ${baseFontStack}`;
      document.body.style.fontSize = `${baseSize}px`;
      
      const headings = document.querySelectorAll('h1');
      headings.forEach(h => {
        h.style.fontFamily = `${customFont}, ${baseFontStack}`;
        h.style.fontSize = `${baseSize * 2.5}px`;
      });
      
      const h2Elements = document.querySelectorAll('h2');
      h2Elements.forEach(h => {
        h.style.fontFamily = `${customFont}, ${baseFontStack}`;
        h.style.fontSize = `${baseSize * 1.8}px`;
      });
      
      const paragraphs = document.querySelectorAll('p');
      paragraphs.forEach(p => {
        p.style.fontFamily = `${customFont}, ${baseFontStack}`;
        p.style.fontSize = `${baseSize * 1.2}px`;
      });
    }

    document.addEventListener('DOMContentLoaded', async () => {
      if (window.dataSdk) {
        const initResult = await window.dataSdk.init(dataHandler);
        if (!initResult.isOk) {
          console.error('Failed to initialize data SDK');
        }
      }
      
      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange,
          mapToCapabilities: (config) => ({
            recolorables: [],
            borderables: [],
            fontEditable: {
              get: () => config.font_family || defaultConfig.font_family,
              set: (value) => {
                config.font_family = value;
                window.elementSdk.setConfig({ font_family: value });
              }
            },
            fontSizeable: {
              get: () => config.font_size || defaultConfig.font_size,
              set: (value) => {
                config.font_size = value;
                window.elementSdk.setConfig({ font_size: value });
              }
            }
          }),
          mapToEditPanelValues: (config) => new Map([
            ["app_title", config.app_title || defaultConfig.app_title],
            ["welcome_message", config.welcome_message || defaultConfig.welcome_message],
            ["login_button", config.login_button || defaultConfig.login_button],
            ["certificate_title", config.certificate_title || defaultConfig.certificate_title],
            ["teacher_name", config.teacher_name || defaultConfig.teacher_name]
          ])
        });
      }
      
      document.getElementById('login-form').addEventListener('submit', handleLogin);
    });
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99b0b8743001ce3f',t:'MTc2MjU1OTI5Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
